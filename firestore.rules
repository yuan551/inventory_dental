rules_version = '2';
service cloud.firestore {
  match /databases/{database}/documents {
    // Default deny: no access unless explicitly allowed below
    match /{document=**} {
      allow read, write: if false;
    }

    // Allow authenticated users to read dashboard-related collections only
    match /consumables/{docId} {
      allow read: if request.auth != null;
      allow write: if request.auth != null;
    }
    match /medicines/{docId} {
      allow read: if request.auth != null;
      allow write: if request.auth != null;
    }
    match /equipment/{docId} {
      allow read: if request.auth != null;
      allow write: if request.auth != null;
    }
    match /stock_logs/{docId} {
      allow read: if request.auth != null;
      allow write: if request.auth != null;
    }
    match /ordered/{docId} {
      allow read: if request.auth != null;
      allow write: if request.auth != null;
    }
    match /waste_items/{docId} {
      allow read: if request.auth != null;
      allow write: if request.auth != null;
    }
    match /notifications/{docId} {
      allow read: if request.auth != null;
      allow write: if request.auth != null;
    }
    match /alert_reads/{docId} {
      allow read: if request.auth != null;
      allow write: if request.auth != null;
    }
  }
}

# NOTE:
# - Deploy these rules to your Firebase project using the Firebase CLI ("firebase deploy --only firestore:rules").
# - These client-side guards are useful UX protections but must be paired with server-side rules like these
#   to prevent malicious clients from reading dashboard data without authentication.
